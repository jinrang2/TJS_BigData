# 6.서브쿼리

```text
SELECT COL1, (SUBQUERY1)
FROM TAB1, (SUBQUERY2)    // 인라인뷰
WHERE COL2 IN (SUQUERY3)
```

## 단일행 서브쿼리

서브 쿼리의 결과가 단일 행인 경우 

SELECT 절은 반드시 단일행 서브쿼리만 올 수있고  
WHERE 는 단일행, 다중행 모두 올수 있지만 연산자가 다르다.

**단일 행 연산자 : =, &gt;, &gt;=, &lt;, &lt;=, &lt;&gt;**

## 다중행 서브쿼리

서브 쿼리의 결과가 다중행

* IN  - 서브 쿼리의 결과 중 하나라도 일치하면 참
* ALL - 서브 쿼리의 결과의 모든것을이 만족하는 결과만 반환 그래서 비교 연산자로  = 을 쓸일이 없다
* ANY - ALL과 달리 하나만 만족하면 참으로 봄
* EXISTS - 메인 쿼리의 비교 조건이 서브 쿼리의 결과 중에서 만족하는 값이 하나라도 존재하면 참

{% hint style="warning" %}
ALL, ANY는 잘쓰지 않지만 헷갈릴수 있으므로 정리 해둠
{% endhint %}

| 연산자 | 조건 | 결과 |
| :--- | :--- | :--- |
| ANY | 1000 &gt; ANY\(500,1000,2000\) | TRUE |
| ANY | 1000 = ANY\(500,1000,2000\) | TRUE |
| ANY | 2000 &gt; ANY\(500,1000,2000\) | FALSE |
| ALL | 1000 &gt; ALL\(500,1000,2000\) | FALSE |
| ALL | 1000 = ALL\(500,1000,2000\) | FALSE |
| ALL | 3000 &gt; ALL\(500,1000,2000\) | TRUE |

| 조건 | ANY | ALL |
| :--- | :--- | :--- |
| = | 하나라도 만족하는 값이 있으면 리턴 | 모든 값들과 같아야 리턴\(사용X\) |
| &gt; | 최소값보다 크면 결과를 리턴 | 최대값보다 크면 리턴 |
| &lt; | 최대값보다 작으면 결과를 리턴 | 최소값보다 작으면 리턴 |
| &lt;&gt; | 모든 값들 중 다른 값만 리턴\(사용X\) | 모든값들과 다르면 리 |

